# 事件循环

js是单线程的，要想在线程运行过程中，能接收并执行新的任务，就需要采用事件循环机制
实现事件循环的一个通用模式是使用消息队列，消息队列是一种数据结构，可以存放要执行的任务。它符合队列“先进先出”的特点，也就是说要添加任务的话，添加到队列的尾部；要取出任务的话，从队列头部去取。

# 宏任务和微任务

为了解决事件循环的效率和实时性问题，引入了宏任务和微任务机制，消息队列中的任务称为宏任务，每个宏任务中都包含了一个微任务队列，在执行宏任务的过程中，加入了其他异步任务，那么就会将任务添加到微任务列表中，这样就不会影响到宏任务的继续执行，因此也就解决了执行效率的问题。

一般来说执行在JS引擎里的就是微任务，执行在JS引擎之外的就是宏任务

拿浏览器举例：setTimeout、setInterval 这种其实不是 JS 语法本身的 API，是 JS 的宿主浏览器提供的 API， 所以是宏任务。
而 Promise 是 JS 本身自带的 API，这种就是微任务。
总结：宿主提供的方法是宏任务，JS 自带的是微任务
